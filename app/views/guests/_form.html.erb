<%= simple_form_for [@event, @guest] do |f| %>
  <div class="form-inputs">
    <%= f.input :first_name, label: 'Prénom' %>
    <%= f.input :last_name, label: 'Nom' %>
    <%= f.input :email, label: 'Email' %>
    <%= f.input :phone_number, label: 'Téléphone' %>
    <%= f.input :group, label: 'Groupe (Famille, Amis, etc.)' %>
    <%= f.input :diet, label: 'Régime (Végétarien, Sans piment, etc.)' %>
    <%= f.input :rsvp_status, label: 'Statut', collection: ['Attente', 'Confirmé', 'Décliné'], prompt: 'Sélectionnez le statut de l\'invité' %>

    <% if @event.guests.any? %>
      <%= f.input :primary_guest_id,
                  label: 'Invité principal',
                  as: :select,
                  collection: @event.guests.collect { |g| [(g.first_name || "") + " " + (g.last_name || ""), g.id] },
                  prompt: 'Aucun' %>
    <% else %>
      <p>Aucun invité disponible pour la sélection. Créez d'abord des invités.</p>
    <% end %>
  </div>

  <div class="form-actions">
    <%= f.button :submit, 'Sauvegarder', class: 'btn btn-primary' %>
    <%= link_to 'Retour à la liste', event_guests_path(@event), class: 'btn btn-secondary' %>
  </div>
<% end %>
