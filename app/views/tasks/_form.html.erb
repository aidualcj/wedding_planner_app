<%= simple_form_for [@event, @task] do |f| %>
  <!-- Nom de la tâche -->
  <%= f.input :name, label: 'Nom de la tâche' %>

  <!-- Catégorie : Sélectionner une catégorie existante ou pas de catégorie -->
  <%= f.input :category_id,
              label: 'Catégorie',
              collection: @event.categories.collect { |c| [c.name, c.id] },
              include_blank: 'Pas de catégorie',
              prompt: 'Choisir une catégorie' %>

  <!-- Nouveau champ pour créer une nouvelle catégorie -->
  <div>
    <%= label_tag :new_category, 'Créer une nouvelle catégorie (optionnel)' %>
    <%= text_field_tag :new_category, '', placeholder: 'Nom de la nouvelle catégorie' %>
  </div>

  <!-- Assignation de la tâche à un invité -->
  <% if @event.guests.any? %>
    <%= f.input :guest_id, label: 'Assign to', collection: @event.guests.collect { |g| ["#{g.first_name} #{g.last_name}", g.id] }, prompt: 'Not assigned' %>
  <% else %>
    <%= f.input :assigned_to_name, label: 'Assign to (name)' %>
  <% end %>

  <!-- Date limite de la tâche -->
  <%= f.input :due_date, label: 'Date limite' %>

  <!-- Statut de la tâche -->
  <%= f.input :status, label: 'Statut', collection: ['À faire', 'Fait'], prompt: 'Choisir un statut' %>

  <!-- Bouton de soumission -->
  <%= f.button :submit, 'Ajouter la tâche', class: 'btn btn-primary' %>
<% end %>
